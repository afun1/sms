<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sparky SMS Editor</title>
  <link rel="icon" type="image/png" href="https://yggfiuqxfxsoyesqgpyt.supabase.co/storage/v1/object/public/assets/1750895659003_hykuwv9s5us_supersparky.png">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.7/dist/umd/supabase.min.js"></script>
  <script src="static/global-nav-v2.js"></script>
  <style>
    /* Provider Selection Styles */
    .providers-section {
      margin-bottom: 48px;
    }
    
    .providers-headline {
      color: #1976ff;
      font-size: 24px;
      margin-bottom: 20px;
      text-align: center;
    }
    
    .providers-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 16px;
      margin-bottom: 32px;
    }
    
    .provider-card {
      background: white;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      padding: 5px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      width: 120px;
      margin: 0 auto;
      position: relative;
      overflow: hidden;
    }
    
    /* Glass shine effect */
    .provider-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 50%;
      background: linear-gradient(180deg, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0.1) 100%);
      border-radius: 10px 10px 0 0;
      pointer-events: none;
      z-index: 1;
    }
    
    /* Glass reflection highlight */
    .provider-card::after {
      content: '';
      position: absolute;
      top: 2px;
      left: 2px;
      right: 2px;
      height: 30%;
      background: linear-gradient(180deg, rgba(255,255,255,0.6) 0%, rgba(255,255,255,0) 100%);
      border-radius: 8px 8px 0 0;
      pointer-events: none;
      z-index: 2;
    }
    
    /* Individual provider gradients */
    .provider-card[data-provider="bulksms"] {
      background: linear-gradient(180deg, #a8e6cf 0%, #4caf50 100%);
      border-color: #4caf50;
    }
    
    .provider-card[data-provider="infobip"] {
      background: linear-gradient(180deg, #ffccbc 0%, #ff5722 100%);
      border-color: #ff5722;
    }
    
    .provider-card[data-provider="clicksend"] {
      background: linear-gradient(180deg, #bbdefb 0%, #2196f3 100%);
      border-color: #2196f3;
    }
    
    .provider-card[data-provider="messagebird"] {
      background: linear-gradient(180deg, #e1bee7 0%, #9c27b0 100%);
      border-color: #9c27b0;
    }
    
    .provider-card[data-provider="sinch"] {
      background: linear-gradient(180deg, #fff3e0 0%, #ff9800 100%);
      border-color: #ff9800;
    }
    
    .provider-card[data-provider="textmagic"] {
      background: linear-gradient(180deg, #f8bbd9 0%, #e91e63 100%);
      border-color: #e91e63;
    }
    
    .provider-card[data-provider="plivo"] {
      background: linear-gradient(180deg, #d1c4e9 0%, #673ab7 100%);
      border-color: #673ab7;
    }
    
    .provider-card:hover {
      border-color: #1976ff;
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(25,118,255,0.3), 0 4px 8px rgba(0,0,0,0.1);
    }
    
    .provider-card:hover::before {
      background: linear-gradient(180deg, rgba(255,255,255,0.5) 0%, rgba(255,255,255,0.2) 100%);
    }
    
    .provider-card:hover::after {
      background: linear-gradient(180deg, rgba(255,255,255,0.7) 0%, rgba(255,255,255,0) 100%);
    }
    
    .provider-card.selected {
      border-color: #1976ff;
      background: #f3f8ff;
    }
    
    .provider-content h3 {
      margin: 0;
      color: white;
      font-size: 18px;
      font-weight: 600;
      text-shadow: 0 1px 2px rgba(0,0,0,0.3);
      position: relative;
      z-index: 3;
    }
    
    /* Editor Form Styles */
    .editor-container {
      background: white;
      border-radius: 12px;
      padding: 32px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    }
    
    .form-group {
      margin-bottom: 24px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #333;
    }
    
    .selected-provider {
      padding: 12px;
      background: #f5f5f5;
      border-radius: 8px;
      border: 1px solid #ddd;
    }
    
    .provider-display {
      color: #666;
    }
    
    .provider-display.selected {
      color: #1976ff;
      font-weight: 600;
    }
    
    .form-group textarea, .form-group input {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
      box-sizing: border-box;
    }
    
    .char-counter {
      text-align: right;
      margin-top: 8px;
      color: #666;
      font-size: 14px;
    }
    
    .form-actions {
      display: flex;
      gap: 16px;
      justify-content: flex-end;
    }
    
    .btn-primary, .btn-secondary {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .btn-primary {
      background: #1976ff;
      color: white;
    }
    
    .btn-primary:hover {
      background: #1565c0;
    }
    
    .btn-secondary {
      background: #f5f5f5;
      color: #333;
      border: 1px solid #ddd;
    }
    
    .btn-secondary:hover {
      background: #e0e0e0;
    }
    
    .result-panel {
      margin-top: 24px;
      padding: 16px;
      border-radius: 8px;
      font-size: 14px;
    }
    
    .result-panel.success {
      background: #e8f5e8;
      color: #2e7d32;
      border: 1px solid #4caf50;
    }
    
    .result-panel.error {
      background: #ffebee;
      color: #c62828;
      border: 1px solid #f44336;
    }
    
    .result-panel.info {
      background: #e3f2fd;
      color: #1565c0;
      border: 1px solid #2196f3;
    }
  </style>
</head>
<body>
  <main style="max-width:1400px;margin:0 auto;padding:24px;">
    <!-- SMS Provider Selection -->
    <section class="providers-section">
      <h1 class="providers-headline">üöÄ SMS Providers with no A2P required</h1>
      
      <div class="providers-container">
        <div class="provider-card" data-provider="bulksms">
          <div class="provider-content">
            <h3>BulkSMS</h3>
          </div>
        </div>
        
        <div class="provider-card" data-provider="infobip">
          <div class="provider-content">
            <h3>Infobip</h3>
          </div>
        </div>
        
        <div class="provider-card" data-provider="clicksend">
          <div class="provider-content">
            <h3>ClickSend</h3>
          </div>
        </div>
        
        <div class="provider-card" data-provider="messagebird">
          <div class="provider-content">
            <h3>MessageBird</h3>
          </div>
        </div>
        
        <div class="provider-card" data-provider="sinch">
          <div class="provider-content">
            <h3>Sinch</h3>
          </div>
        </div>
        
        <div class="provider-card" data-provider="textmagic">
          <div class="provider-content">
            <h3>TextMagic</h3>
          </div>
        </div>
        
        <div class="provider-card" data-provider="plivo">
          <div class="provider-content">
            <h3>Plivo</h3>
          </div>
        </div>
      </div>
    </section>

    <!-- SMS Editor Form -->
    <section class="editor-section" style="margin-top:48px;">
      <div class="editor-container">
        <h2 style="color:#333;margin-bottom:24px;">üìù SMS Message Editor</h2>
        <form id="sms-form">
          <div class="form-group">
            <label for="selected-provider">Selected Provider:</label>
            <div class="selected-provider" id="selected-provider">
              <span class="provider-display">Click a provider above to select</span>
            </div>
          </div>
          
          <div class="form-group">
            <label for="sms-message">Message Content:</label>
            <textarea id="sms-message" name="sms-message" rows="4" placeholder="Enter your SMS message here..."></textarea>
            <div class="char-counter">
              <span id="char-count">0</span>/160 characters
            </div>
          </div>
          
          <div class="form-group">
            <label for="sms-recipients">Recipients:</label>
            <input type="text" id="sms-recipients" name="sms-recipients" placeholder="Enter phone numbers (comma-separated)" />
          </div>
          
          <div class="form-actions">
            <button type="button" class="btn-secondary" onclick="previewMessage()">Preview</button>
            <button type="submit" class="btn-primary">Send SMS</button>
          </div>
        </form>
        
        <div id="sms-result" class="result-panel" style="display:none;"></div>
      </div>
    </section>

    <!-- Provider Information Guide -->
    <section style="margin-top:48px;">
      <div style="background:#f8f9fa;border:1px solid #dee2e6;border-radius:12px;padding:24px;">
        <h3 style="color:#495057;margin:0 0 12px 0;">üìã SMS Provider Information</h3>
        <p style="margin:0 0 16px 0;font-size:14px;color:#6c757d;">
          All providers listed above offer SMS services for international markets without requiring complex A2P or 10DLC registration. 
          This makes them ideal for businesses looking to send SMS globally without lengthy approval processes.
        </p>
        <div style="text-align:center;">
          <a href="SMS_PROVIDERS_NO_A2P_GUIDE.md" target="_blank" 
             style="background:#1976ff;color:white;padding:12px 24px;border-radius:8px;text-decoration:none;font-weight:600;display:inline-block;">
            üìñ View Complete Provider Guide
          </a>
        </div>
      </div>
    </section>
  </main>

  <script>
    // Initialize Supabase client
    const SUPABASE_URL = 'https://yggfiuqxfxsoyesqgpyt.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlnZ2ZpdXF4Znhzb3llc3FncHl0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA4MTQ0NjEsImV4cCI6MjA2NjM5MDQ2MX0.YD3fUy1m7lNWCMfUhd1DP7rlmq2tmlwAxg_yJxruB-Q';
    
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    console.log('[DEBUG] Supabase client initialized in sms_editor.html');

    let selectedProvider = null;

    // Provider Selection Functionality
    document.addEventListener('DOMContentLoaded', function() {
      // Add click handlers for provider cards
      const providerCards = document.querySelectorAll('.provider-card');
      providerCards.forEach(card => {
        card.addEventListener('click', function() {
          const providerId = this.dataset.provider;
          
          // Remove selected class from all cards
          providerCards.forEach(c => c.classList.remove('selected'));
          
          // Add selected class to clicked card
          this.classList.add('selected');
          selectedProvider = providerId;
          
          // Update the selected provider display
          const providerName = this.querySelector('h3').textContent;
          const providerDisplay = document.getElementById('selected-provider');
          providerDisplay.innerHTML = `
            <span class="provider-display selected">
              <strong>${providerName}</strong> - Ready to configure
            </span>
          `;
        });
      });
    });

    // Character counter for SMS
    function updateCharCount() {
      const textarea = document.getElementById('sms-message');
      const counter = document.getElementById('char-count');
      const count = textarea.value.length;
      counter.textContent = count;
      
      // Change color based on character count
      if (count > 160) {
        counter.style.color = '#e53935';
      } else if (count > 140) {
        counter.style.color = '#ff9800';
      } else {
        counter.style.color = '#4caf50';
      }
    }

    // Preview message function
    function previewMessage() {
      const message = document.getElementById('sms-message').value.trim();
      const recipients = document.getElementById('sms-recipients').value.trim();
      
      if (!message) {
        alert('Please enter a message to preview.');
        return;
      }

      if (!selectedProvider) {
        alert('Please select an SMS provider first.');
        return;
      }
      
      const previewWindow = window.open('', '_blank', 'width=400,height=600');
      previewWindow.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>SMS Preview</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
            .phone { background: white; border-radius: 20px; padding: 20px; max-width: 300px; margin: 0 auto; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
            .message { background: #007aff; color: white; padding: 12px 16px; border-radius: 18px; margin: 10px 0; font-size: 16px; line-height: 1.4; }
            .info { color: #666; font-size: 14px; margin-top: 20px; }
            .provider { background: #e3f2fd; padding: 8px 12px; border-radius: 8px; margin-bottom: 10px; font-weight: bold; color: #1976ff; }
          </style>
        </head>
        <body>
          <div class="phone">
            <h3>SMS Preview</h3>
            <div class="provider">Provider: ${selectedProvider.toUpperCase()}</div>
            <div class="message">${message}</div>
            <div class="info">
              <strong>Character Count:</strong> ${message.length}/160<br>
              <strong>Estimated Cost:</strong> $${(message.length > 160 ? 0.02 : 0.01).toFixed(2)} per message<br>
              ${recipients ? `<strong>Recipients:</strong> ${recipients.split(',').length} numbers` : ''}
              <br><strong>A2P Registration:</strong> Not required ‚úÖ
            </div>
          </div>
        </body>
        </html>
      `);
    }

    // SMS form handler
    document.getElementById('sms-form').addEventListener('submit', async function(e) {
      e.preventDefault();
      const message = document.getElementById('sms-message').value.trim();
      const recipients = document.getElementById('sms-recipients').value.trim();
      
      if (!selectedProvider) {
        showResult('Please select an SMS provider first.', 'error');
        return;
      }
      
      if (!message) {
        showResult('Please enter a message.', 'error');
        return;
      }
      
      if (!recipients) {
        showResult('Please enter recipient phone numbers.', 'error');
        return;
      }
      
      showResult(`Sending SMS via ${selectedProvider.toUpperCase()}...`, 'info');
      
      // Simulate SMS sending
      setTimeout(() => {
        const recipientCount = recipients.split(',').length;
        showResult(`‚úÖ SMS sent successfully via ${selectedProvider.toUpperCase()} to ${recipientCount} recipient(s)!<br><br><strong>Provider:</strong> ${selectedProvider}<br><strong>Message:</strong> ${message}<br><strong>Status:</strong> No A2P registration required`, 'success');
      }, 1500);
    });

    // Show result function
    function showResult(message, type) {
      const resultDiv = document.getElementById('sms-result');
      resultDiv.style.display = 'block';
      resultDiv.innerHTML = message;
      resultDiv.className = `result-panel ${type}`;
      resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }

    // Add character counter event listener
    document.addEventListener('DOMContentLoaded', function() {
      const textarea = document.getElementById('sms-message');
      if (textarea) {
        textarea.addEventListener('input', updateCharCount);
        updateCharCount(); // Initial count
      }
    });
  </script>
</body>
</html>
